{% extends "base.html" %}

{% block content %}

<div style="text-align: center; margin-bottom: 2rem;">
    <img src="{{ user.avatar(128)}}"
         alt="Profile Image"
         style="width: 80px; height: 80px; border-radius: 50%; object-fit: cover; display: block; margin: 0 auto 1rem;">

    <h1>Hi, {{ user.username }} üëã</h1>
    {%if user.about_me %}<p>{{ user.about_me }}</p>{% endif %}
    {%if user.last_seen %}<p>Last seen on: {{ moment(user.last_seen).format('LLL') }}</p>{% endif %}
    <p>{{ user.followers_count() }} followers, {{ user.following_count() }} following.</p>
{% if user == current_user %}
    <div style="text-align: center; margin-bottom: 2rem;">
        <a href="{{ url_for('edit_profile') }}"
           style="color: #1a73e8; font-weight: 500; text-decoration: none;">
            ‚úèÔ∏è Edit Profile
        </a>
    </div>
{% elif not current_user.is_following(user) %}
        <p>
            <form action="{{ url_for('follow', username=user.username) }}" method="post">
                {{ form.hidden_tag() }}
                {{ form.submit(value='Follow') }}
            </form>
        </p>
        {% else %}
        <p>
            <form action="{{ url_for('unfollow', username=user.username) }}" method="post">
                {{ form.hidden_tag() }}
                {{ form.submit(value='Unfollow') }}
            </form>
        </p>
{% endif %}

</div>

<div style="max-width: 700px; margin: auto;">
    {% for post in posts %}
    <div style="background: #fff; border-radius: 12px; padding: 1.5rem; margin-bottom: 1.5rem; box-shadow: 0 2px 8px rgba(0,0,0,0.06);">
         <img src="{{ post.author.avatar(36)}}"
             alt="Profile Image"
             style="width: 60px; height: 60px; border-radius: 50%; object-fit: cover; margin-right: 1rem;">
        <div style="font-weight: 600; margin-bottom: 0.5rem; color: #333;">
            {{ post.author.username }} says:
        </div>
        <div style="font-size: 1.1rem; color: #555; line-height: 1.5;">
            {{ post.body }}
        </div>
    </div>
<!--         {% include '_post.html' %}-->
    {% else %}
    <p style="text-align: center; color: #888;">No posts yet.</p>
    {% endfor %}
    {% if prev_url or next_url %}
        <div style="display: flex; justify-content: center; margin-top: 2rem;">
            {% if prev_url %}
                <a href="{{ prev_url }}" style="margin-right: 1rem;">Newer Posts</a>
            {% endif %}
            {% if next_url %}
                <a href="{{ next_url }}">Older Posts</a>
            {% endif %}
        </div>
    {% endif %}
</div>

{% endblock %}
